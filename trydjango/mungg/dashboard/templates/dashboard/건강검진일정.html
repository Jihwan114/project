<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>멍바디</title>
    <style>
        #calendar{	height: 100%; width:100%;
        }
        #calendar1{	height: 670px; width:100%;
        }
  
    </style>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">

    <link rel="stylesheet" href="{% static 'vendors/perfect-scrollbar/perfect-scrollbar.css' %}">
    <link rel="stylesheet" href="{% static 'vendors/bootstrap-icons/bootstrap-icons.css' %}">
    <link rel="stylesheet" href="{% static 'css/app.css' %}">
    <meta charset='utf-8' />
    <link rel='stylesheet' href="{% static 'css/main_cal.css' %}" >
    <script src="{% static 'js/main_cal.js' %}"></script>
    
    <script>

Date.prototype.format = function (f) {

if (!this.valueOf()) return " ";



var weekKorName = ["일요일", "월요일", "화요일", "수요일", "목요일", "금요일", "토요일"];

var weekKorShortName = ["일", "월", "화", "수", "목", "금", "토"];

var weekEngName = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];

var weekEngShortName = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];

var d = this;



return f.replace(/(yyyy|yy|MM|dd|KS|KL|ES|EL|HH|hh|mm|ss|a\/p)/gi, function ($1) {

    switch ($1) {

        case "yyyy": return d.getFullYear(); // 년 (4자리)

        case "MM": return (d.getMonth() + 1).zf(2); // 월 (2자리)

        case "dd": return d.getDate().zf(2); // 일 (2자리)

        case "KS": return weekKorShortName[d.getDay()]; // 요일 (짧은 한글)

        case "KL": return weekKorName[d.getDay()]; // 요일 (긴 한글)

        case "ES": return weekEngShortName[d.getDay()]; // 요일 (짧은 영어)

        case "EL": return weekEngName[d.getDay()]; // 요일 (긴 영어)

        case "HH": return d.getHours().zf(2); // 시간 (24시간 기준, 2자리)

        case "hh": return ((h = d.getHours() % 12) ? h : 12).zf(2); // 시간 (12시간 기준, 2자리)

        case "mm": return d.getMinutes().zf(2); // 분 (2자리)

        case "ss": return d.getSeconds().zf(2); // 초 (2자리)

        case "a/p": return d.getHours() < 12 ? "오전" : "오후"; // 오전/오후 구분

        default: return $1;

    }

});

};


String.prototype.string = function (len) { var s = '', i = 0; while (i++ < len) { s += this; } return s; };

String.prototype.zf = function (len) { return "0".string(len - this.length) + this; };

Number.prototype.zf = function (len) { return this.toString().zf(len); };





    y=2020
    m=11
    d=5
    birth=new Date(y,m,d)

    function addDay(date, days) {
       var clone = new Date(date); 
       clone.setDate(date.getDate() + days) 
       var yyyy=clone.getFullYear()
       var mm=(clone.getMonth())
       var dd=clone.getDate()
       var strdate=yyyy+"-"+mm+"-"+dd
       return strdate }
    
    function addDays(date, days) {
       var clone = new Date(date); 
       clone.setDate(date.getDate() + days) 
       
       return clone }       

    // function addMonth(date, n) {
    //    const clone = new Date(date); 
    //    clone.setDate(date.getMonth() + n) 
    //    return clone; }
    
    // new Date().toISOString().slice(0, 7)

    var event_array=[];
    
    event_array.push({title: '종합예방접종'+1+'차',start:addDays(birth,12).format('yyyy-MM-dd')});
    event_array.push({title: '종합예방접종'+2+'차',start:addDays(birth,26).format('yyyy-MM-dd')});
    event_array.push({title: '종합예방접종'+3+'차',start:addDays(birth,40).format('yyyy-MM-dd')});
    event_array.push({title: '종합예방접종'+4+'차',start:addDays(birth,54).format('yyyy-MM-dd')});
    event_array.push({title: '종합예방접종'+5+'차',start:addDays(birth,75).format('yyyy-MM-dd')});
    event_array.push({title: '코로나장염예방접종'+1+'차',start:addDays(birth,12).format('yyyy-MM-dd')});
    event_array.push({title: '코로나장염예방접종'+2+'차',start:addDays(birth,26).format('yyyy-MM-dd')});
    event_array.push({title: '켄넬코프예방접종'+1+'차',start:addDays(birth,40).format('yyyy-MM-dd')});
    event_array.push({title: '켄넬코프예방접종'+2+'차',start:addDays(birth,54).format('yyyy-MM-dd')});
    event_array.push({title: '광견병예방접종'+1+'차',start:addDays(birth,75).format('yyyy-MM-dd')});

    for (var i = 1; i < 20; i++)  {
      event_array.push({title: '종합예방접종',start:addDays(birth,365*i-30).format('yyyy-MM-dd')})
      event_array.push({title: '코로나장염예방접종',start:addDays(birth,365*i-30).format('yyyy-MM-dd')});
      event_array.push({title: '켄넬코프예방접종',start:addDays(birth,365*i-30).format('yyyy-MM-dd')});
      event_array.push({title: '광견병예방접종',start:addDays(birth,365*i-30).format('yyyy-MM-dd')})
      }
    for (var i = 1; i < 240; i++)  {
      event_array.push({title: '기생충구충제 투여',start:addDays(birth,(i-1)*60).format('yyyy-MM-dd')});
      if(addDays(birth,30*i).getMonth()<=10&& addDays(birth,30*i).getMonth()>=4)
      {event_array.push({title: '심장사사충 접종',start:addDays(birth,30*i-30).format('yyyy-MM-dd')}); 
        }

      }         
    document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');
    
        var srcCalendarEl = document.getElementById('calendar1');

        var srcCalendar = new FullCalendar.Calendar(srcCalendarEl,{
          headerToolbar: {
            left: 'prev,next',
            center: 'title',
            right: 'listYear'
          },
          initialView: 'listYear',
          initialDate: new Date().toISOString().slice(0, 7),
          navLinks: true, // can click day/week names to navigate views
          selectable: false,
          selectMirror: true,
          select: function(arg) {
            var title = prompt('Event Title:');
            if (title) {
              calendar.addEvent({
                title: title,
                start: arg.start,
                end: arg.end,
                allDay: arg.allDay
              })
            }
            calendar.unselect()
          },
         
          editable: true,
          dayMaxEvents: true, // allow "more" link when too many events
          events: event_array
        });        
        var calendar = new FullCalendar.Calendar(calendarEl, {
          headerToolbar: {
            left: 'prev,next today',
            center: 'title',
            right: 'dayGridMonth,timeGridWeek'
          },
          initialDate: new Date().toISOString().slice(0, 7),
          navLinks: true, // can click day/week names to navigate views
          selectable: true,
          selectMirror: true,
          select: function(arg) {
            var title = prompt('Event Title:');
            if (title) {
              calendar.addEvent({
                title: title,
                start: arg.start,
                end: arg.end,
                allDay: arg.allDay
              })
            }
            calendar.unselect()
          },

          editable: false,
          dayMaxEvents: true, // allow "more" link when too many events

          events:event_array
        });
    
        calendar.render();
        srcCalendar.render();
      });
    
    </script>


</head>

<body>
    <div id="app">
        <div id="sidebar" class="active">
            <div class="sidebar-wrapper active">
                <div class="sidebar-header">
                    <div class="d-flex justify-content-between" style="padding-left: 40px;">
                        <div class="logo">
                            <a href="{% url 'home' %}"><img src="{% static 'images/logo/logo.png' %}" style="max-width: 150px; height: 150px; float : right;" alt="Logo" srcset=""></a>
                        </div>
                        <div class="toggler">
                            <a href="#" class="sidebar-hide d-xl-none d-block"><i class="bi bi-x bi-middle"></i></a>
                        </div>
                    </div>
                </div>
                <div class="sidebar-menu">
                    <ul class="menu">
                        <li class="sidebar-title">Menu</li>

                        <li class="sidebar-item  ">
                            <a href="{% url 'home' %}" class='sidebar-link'>
                                <i class="bi bi-grid-fill"></i>
                                <span>Home</span>
                            </a>
                        </li>

                        
                        <li class="sidebar-item  ">
                            <a href="{% url 'weight' %}" class='sidebar-link'>
                                <i class="bi bi-file-earmark-medical-fill"></i>
                                <span>강아지 몸무게 체크</span>
                            </a>
                        </li>



                        <li class="sidebar-item  ">
                            <a href="{% url 'hospital' %}" class='sidebar-link'>
                                <i class="bi bi-grid-1x2-fill"></i>
                                <span>주변 동물병원정보</span>
                            </a>
                        </li>

                        <li class="sidebar-item  ">
                            <a href="{% url 'tip' %}" class='sidebar-link'>
                                <i class="bi bi-file-earmark-spreadsheet-fill"></i>
                                <span>강아지 잘 키우는법</span>
                            </a>
                        </li>
                        <li class="sidebar-item active ">
                            <a href="{% url 'schedule' %}" class='sidebar-link'>
                                <i class="bi bi-file-earmark-medical-fill"></i>
                                <span>건강검진일정</span>
                            </a>
                        </li>

                    </ul>
                </div>
                <button class="sidebar-toggler btn x"><i data-feather="x"></i></button>
            </div>
                <button class="sidebar-toggler btn x"><i data-feather="x"></i></button>
            </div>
        </div>
        <div id="main">
            <header class="mb-3">
                <a href="#" class="burger-btn d-block d-xl-none">
                    <i class="bi bi-justify fs-3"></i>
                </a>
            </header>

            <div class="page-heading">
                <div class="page-title">
                    <div class="row">
                        <div class="col-12 col-md-6 order-md-1 order-last">
                            <h3>건강검진일정</h3>
                            <p class="text-subtitle text-muted">강아지 생년월일 정보기준으로 당신이 챙겨야할 건강검진 및 예방주사 일정을 알려드립니다.</p>
                        </div>
                        <div class="col-12 col-md-6 order-md-2 order-first">
                            <nav aria-label="breadcrumb" class="breadcrumb-header float-start float-lg-end">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="#logout"><p></p><br>Log-out</a></li>
                                </ol>
                            </nav>
                        </div>
                    </div>
                </div>
                <section id="basic-horizontal-layouts"">
                  <div class="row match-height">
                    <div class="col-md-8 col-12">
                      <div class="card">
                          <div class="card-content">
                              <div class="card-body">
                                <div class="form-body">
                                      <div id='calendar'></div>
                                </div>
                              </div>
                          </div>
                      </div>
                    </div>
                    <div class="col-md-4 col-12">
                      <div class="card-content">
                        <div class="card">
                              <div class="card-body">
                                <div class="form-body">
                                  <div id='calendar1'></div>
                                </div>
                              </div>
                        </div>
                      </div>                     
                    </div>
                  </div>
                </section>


              

            <footer>
                <div class="footer clearfix mb-0 text-muted">
                    <div class="float-start">
                        <p>이자리는 뭘 넣을까?</p>
                    </div>
                    <div class="float-end">
                        이미지나 하나 넣을까?
                    </div>
                </div>
            </footer>
        </div>
    </div>
    <script src="assets/vendors/perfect-scrollbar/perfect-scrollbar.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>

    <script src="assets/js/main.js"></script>
</body>

</html>